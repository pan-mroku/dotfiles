#!/bin/bash

AskYN()
{
		while [ true ]; do 
				read -p "$1" yn
				case $yn in
						[yY]*)
								return 0
								break
								;;
						[nN]*)
								return 1
								break
								;;
						*)
								echo;;
				esac
		done
}

OLDIFS=$IFS
IFS=$'\n'

for FILE in `git s|grep "^ .*\|^??.*"|sed 's|^...||;s| |\\ |;s|"||g'`; do
		clear
		git	diffw "`pwd`/$FILE"
		if AskYN "$FILE: Add to commit? [y/n]" ; then
				git add "$FILE"
				echo
		fi
done

IFS=$OLDIFS
